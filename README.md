**HOW TO RUN:**
---------------------------------------------------------------------------------------------------------
The model is deployed on Docker Hub. You can pull and run it using the following commands:

docker pull aizelsheikh/hepabot-v2:latest
docker run -p 8501:8501 aizelsheikh/hepabot-v2:latest

Once the container is running, open your browser and visit:
http://127.0.0.1:8501


NOTE: For the first time since embeddings and models will be downloaded so it might take 10-15 minutes based
on internet speed. for second onwards inference time depends on audio length and is approximately 1 min.
---------------------------------------------------------------------------------------------------------

**Problem Statement:**
The goal is to evaluate the accuracy of the diagnosis generated by the system from 
transcribed doctor-patient conversations. This includes checking the consistency between 
the summary diagnosis and the final report diagnosis.

**Evaluation Criteria:**

If the confidence level of diagnosis is Medium or High, it is considered correct.
Low confidence is considered an incorrect diagnosis.
Note: The system currently supports diagnosis for five liver diseases with minor differentiating factors.

---------------------------------------------------------------------------------------------------------

Module 1: Generate Report
Upload the Doctor Patient Conversation in Generate Report module.
    - The conversations will be automatically transcribed
    - Summary Report will be generated
    - Diagnosis will generated from Rag Component and will be displayed under summary
    - Report can be downloaded.
    - if patient already exists, His/Her record will be updated.

**Test point**: Compare the diagnosis from the summary and the final report. Evaluate based on confidence level.
**Note**: since only 5 liver diseases are targetted which have minor difference so If the confidence level of 
diagnosis is Medium or High, it is considered correct. Low confidence of True Label is considered an incorrect diagnosis.
---------------------------------------------------------------------------------------------------------

Module 2: Patient Browser
    - View historical patient records.
    - Data is organized into sections (e.g., clinical summary, diagnosis, lab tests).
    - Records are stored in a Vector Database for efficient retrieval.
---------------------------------------------------------------------------------------------------------

Module 3: Analytics
    - Disease distribution charts
    - Age distribution charts
    - Gender distribution charts
---------------------------------------------------------------------------------------------------------

Module 4: Advance Search
    -Filter and search patient records by:
        . Disease type
        . Age
        . Custom sorting options
---------------------------------------------------------------------------------------------------------

Module 5: Clinical Assistant
    - Ask questions directly to the LLM-based assistant.
    - Response include:
        . Probable diagnosis with confidence value
        . Suggested questions for the doctor to ask
        . Recommended lab tests
---------------------------------------------------------------------------------------------------------


**SAMPLES TO TEST IN CLINICAL ASSISTANT TO CONFIRM DIAGNOSIS ACCURACY**
Note: Please ensure correct value change which belongs to one of the disease 
    (-Budd Chiari Syndrome 
    - Cholangiocarcinoma 
    - Chronic viral hepatitis C 
    - Hepatic fibrosis
    - Hepatocellular Carcinoma
    - Chronic hepatic failure
or possibly confirm it by doctor if using inputs other than these for correct evaluation of diagnosis.)

TEST INPUT 1:
Patient presents with abdominal pain, ascites, and hepatomegaly. Lab
values show elevated bilirubin (3.5 mg/dL) and AST/ALT (100/120 U/L).
TRUE LABEL: Budd Chiari Syndrome

TEST INPUT 2:
Patient has a FIB-4 index of 3.8, age 60, AST 80 U/L, platelets
100,000/μL, ALT 70 U/L. Reports fatigue and mild jaundice
TRUE LABEL: Hepatic fibrosis

TEST INPUT 3:
Patient presents with chronic fatigue and mild jaundice. Lab values:
bilirubin 3 mg/dL, AST 80 U/L, ALT 75 U/L, INR 1.4. History of hepatitis C
TRUE LABEL: Chronic viral hepatitis C

TEST INPUT 4.
Patient has a FIB-4 index of 3.5, age 58, AST 75 U/L, platelets
110,000/μL, ALT 65 U/L. Reports fatigue and weight loss.
TRUE LABEL: Hepatic fibrosis

TEST INPUT 5.
I've had severe pain in the upper right part of my abdomen for the past week. My legs are swelling,
and I feel nauseated. The doctor said there's fluid in my abdomen and something about blocked liver veins.
TRUE LABEL: Budd Chiari Syndrome

**SAMPLE AUDIO CONVERSATIONS ARE ATTACHED. PLEASE SEE FOLDER TEST AUDIOS.
IF YOU WANT TO RECORD YOUR OWN AUDIO REMEmBER THAT AGE AND MRN
IS IMPORTANT AS MRN IDENTIFIES PATIENT AND AGE PLAYS A FACTOR IN LIVER DISEASE DIAGNOSIS**


IMPORTANT: If you are generating data to test diagnosis give this prompt to gpt:

"""
i want to test some diagnosis test cases for following  diseases
    -Budd Chiari Syndrome 
    - Cholangiocarcinoma 
    - Chronic viral hepatitis C 
    - Hepatic fibrosis
    - Hepatocellular Carcinoma
    - Chronic hepatic failure 
    
    give me sample inputs and true labels 

    Example: 
    Input:
    The biopsy results show Stage 2 liver fibrosis. The patient reports long-term alcohol use but has stopped drinking recently. There are no signs of cirrhosis or cancer.
    Expected Diagnosis: Hepatic Fibrosis

"""

VERY VERY IMPORTANT: PLEASE DROP A MESSAGE ON SLACK IF ENCOUNTERING ANY ISSUES.
